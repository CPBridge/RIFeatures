<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIFeatures: Rotation Invariant Features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="small_basis.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RIFeatures
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A C++ library for calculating rotation invariant features from 2D images using OpenCV.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Rotation Invariant Features </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A small C++ library for calculating rotation invariant image features.</p>
<p><img src="README.png?raw=true" alt="A Rotation Invariant Basis Function Set" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Objectives</h2>
<p>The purpose of this library is to calculate rotation invariant features from 2D images. These are a set of features that describe circular image patches in an image in a way that is invariant to the orientation of the patch. They can therefore be used to detect objects in any orientation in a straightforward way.</p>
<p>The emphasis is on providing a highly efficient implementation that:</p><ul>
<li>Integrates well with random forests machine learning algorithms.</li>
<li>Only calculates the required features 'on-the-fly'.</li>
<li>Uses Fourier-domain calculations to improve calculation speeds.</li>
<li>Is thread-safe to allow learning algorithms using OpenMP multi-threading to use extract features avoiding data-races (note that only the functions that are explicitly described as thread-safe in the documentation should be used within parallel segments).</li>
</ul>
<p>A detailed description of how the feature extraction method works, an evalution, and citations of relevant scientific literature can be found in my <a href="https://chrisbridge.science/docs/bridge_thesis.pdf">DPhil (PhD) thesis</a>. You can find out more about how I am using the library on my <a href="https://chrisbridge.science/">website</a>.</p>
<p><b>Disclaimer</b> This is research-quality code I have provided to enable others to understand, reproduce and develop my research. It is <b>not</b> intended to be production quality code. It expects to be used in a certain way and there are many ways to break it by not using it in this way resulting in runtime crashes or unexpected results. There is very minimal error checking to detect these cases. Follow the examples and documentation closely though and it should be easy to use it correctly.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Dependencies</h2>
<ul>
<li>A C++ compiler supporting the C++11 standard (requires a relatively modern version of your compiler).</li>
<li>A C++ compiler supporting the <a href="http://openmp.org/wp/">OpenMP</a> standard (includes most major compilers on major platforms including MSVC, g++ and clang).</li>
<li>The <a href="http://opencv.org">OpenCV</a> library. Tested on version 4.2 but most fairly recent versions should be compatible. If you are using GNU/Linux, there will probably be a suitable packaged version in your distribution's repository.</li>
<li>The <a href="http://www.boost.org">boost</a> <a href="http://www.boost.org/doc/libs/1_62_0/libs/math/doc/html/special.html">special functions</a> library. Again there is likely to be a suitable packaged version on your GNU/Linux distribution.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Installation and Compilation</h2>
<p>The library consists of a shared object library (<code>librifeatures.so</code> or <code>.dll</code> on Windows) and a set of headers.</p>
<p>In order to use the library you will need to compile all the source files in the <code>src</code> directory to create the object file and install it somewhere on the dynamic linker path on your system. You will also need to copy the header files (in the <code>include</code> directory) to somewhere your compiler will find them, or point your compiler at them each time.</p>
<p>A makefile is provided to automate these tasks on most GNU/Linux operating systems using the <code>g++</code> compiler. To use this, navigate to the <code>build</code> directory and execute the following commands:</p>
<div class="fragment"><div class="line">$ make</div>
<div class="line">$ sudo make install</div>
</div><!-- fragment --><p>You can also compile and install a debug version of the library (<code>librifeaturesd.so</code>) with:</p>
<div class="fragment"><div class="line">$ make debug</div>
<div class="line">$ sudo make install-debug</div>
</div><!-- fragment --><p>You can uninstall both the release and debug versions with:</p>
<div class="fragment"><div class="line">$ sudo make uninstall</div>
</div><!-- fragment --><p>For other environments you will need to work out how to do these steps yourself.</p>
<p>Once installed, to use the library in your C++ code, you just need to include the following header file in your source files: </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">#include &lt;RIFeatures/RIFeatExtractor.hpp&gt;</div>
</div><!-- fragment --><p>Then when compiling your code, make sure to link against OpenCV and the <code>librifeatures.so</code> shared object, as well as using c++11 or later and the OpenMP extensions. E.g. to compile a source file called <code>my_program.cpp</code> to produce an executable called <code>my_program</code>, use something like the following:</p>
<div class="fragment"><div class="line">$ g++ -std=c++11 -fopenmp -o my_program my_program.cpp `pkg-config --libs opencv4` -lrifeatures</div>
</div><!-- fragment --><p>If you have decided not to install the library on your system as above, you just need to add the <code>include</code> directory to the list of directories your compiler looks at for headers, and add the compiled shared object file to the linker dependencies.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Example</h2>
<p>The repository includes an example file (<code>example/rotinv_test.cpp</code>) with plenty of comments that demonstrates how to use the basic functionality of the library.</p>
<p>You can compile it (once the library has been installed, as above) by running the following from the <code>build</code> directory:</p>
<div class="fragment"><div class="line">$ make example</div>
</div><!-- fragment --><p>You can then run it with on a video file (<code>path/to/some/video/file.avi</code>):</p>
<div class="fragment"><div class="line">$ ./example path/to/some/video/file.avi</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Documentation</h2>
<p>The full documentation can be found <a href="https://cpbridge.github.io/RIFeatures/">here</a> or generated from the source using Doxygen. To do this, install the <a href="http://doxygen.org">Doxygen</a> tool (available in most GNU/Linux repositories) and from the <code>doc</code> directory run.</p>
<div class="fragment"><div class="line">$ doygen Doxyfile</div>
</div><!-- fragment --><p>This will generate an html version of the documentation in the <code>html</code> subdirectory, which you can view by opening <code>index.html</code> in your browser.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Publications</h2>
<p>This library was used in the following publications:</p><ul>
<li>C.P. Bridge, “Computer-Aided Analysis of Fetal Cardiac Ultrasound Videos”, DPhil Thesis, University of Oxford, 2017. Available on <a href="https://chrisbridge.science/publications.html">my website</a>.</li>
<li>C.P. Bridge, C. Ioannou, and J.A. Noble, “Automated Annotation and Quantitative Description of Ultrasound Videos of the Fetal Heart”, <em>Medical Image Analysis</em> 36 (Feb. 2017), pp. 147-161</li>
<li>C.P. Bridge, Christos Ioannou, and J.A. Noble, “Localizing Cardiac Structures in Fetal Heart Ultrasound Video”, <em>Machine Learning in Medical Imaging Workshop, MICCAI, 2017</em>, pp. 246-255. Original article available <a href="https://link.springer.com/chapter/10.1007/978-3-319-67389-9_29">here</a>. Authors' manuscript available on <a href="https://chrisbridge.science/publications.html">my website</a>.</li>
</ul>
<p>If you use this library in your research, please consider citing these papers. Other relevant publications include:</p>
<ul>
<li>C.P. Bridge and J.A. Noble, “Object Localisation In Fetal Ultrasound Images Using Invariant Features”. Proceedings of the IEEE International Symposium on Biomedical Imaging, New York City, 2015</li>
</ul>
<p>Finally, much of this work is based heavily on the following paper, with which I have no association:</p>
<ul>
<li>K. Liu et al. “Rotation-Invariant HOG Descriptors Using Fourier Analysis in Polar and Spherical Coordinates”. In: International Journal of Computer Vision 106.3 (2014), pp. 342–364</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Author</h2>
<p>Written by Christopher Bridge at the University of Oxford's Institute of Biomedical Engineering.</p>
<p>The repository also includes some code written by J-P Moreau for calculation of the struve function (the two functions in <code>struve.cpp</code>) that was put up with no licensing information <a href="http://jean-pierre.moreau.pagesperso-orange.fr/c_function2.html">here</a>. For convenience I have included a slightly modified versions of these files. If you feel that I have misappropriated your code, please get in touch.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Licence</h2>
<p>This library is available under the GNU General Public License (GPL v3). For more information, see the licence file. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
